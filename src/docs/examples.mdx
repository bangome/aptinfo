# 컴포넌트 예제 및 패턴

실제 프로젝트에서 사용되는 컴포넌트 패턴과 예제 코드를 소개합니다.

## 실제 코드에서 추출한 패턴

### 아파트 상세 페이지 패턴

아파트 상세 페이지(`src/app/apartments/[id]/page.tsx`)에서 사용된 패턴들입니다.

#### 이미지 갤러리 패턴

```tsx
// 이미지 갤러리 with 내비게이션
function ImageGallery({ images, alt }) {
  const [currentIndex, setCurrentIndex] = useState(0);

  const nextImage = () => {
    setCurrentIndex((prev) =>
      prev === images.length - 1 ? 0 : prev + 1
    );
  };

  const prevImage = () => {
    setCurrentIndex((prev) =>
      prev === 0 ? images.length - 1 : prev - 1
    );
  };

  return (
    <Card>
      <CardContent className="p-0">
        <div className="relative h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg">
          <Image
            src={images[currentIndex] || '/placeholder.jpg'}
            alt={`${alt} - 이미지 ${currentIndex + 1}`}
            fill
            className="object-cover"
          />

          {images.length > 1 && (
            <>
              <Button
                variant="secondary"
                size="icon-sm"
                className="absolute left-2 sm:left-4 top-1/2 transform -translate-y-1/2 rounded-full focus-outline"
                onClick={prevImage}
                aria-label="이전 이미지"
              >
                <ChevronLeft className="h-4 w-4" aria-hidden="true" />
              </Button>

              <Button
                variant="secondary"
                size="icon-sm"
                className="absolute right-2 sm:right-4 top-1/2 transform -translate-y-1/2 rounded-full focus-outline"
                onClick={nextImage}
                aria-label="다음 이미지"
              >
                <ChevronRight className="h-4 w-4" aria-hidden="true" />
              </Button>

              <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 rounded-full px-3 py-1">
                <span className="text-white text-body2">
                  {currentIndex + 1} / {images.length}
                </span>
              </div>
            </>
          )}
        </div>
      </CardContent>
    </Card>
  );
}
```

#### 정보 그리드 패턴

```tsx
// 아파트 기본 정보 그리드
function InfoGrid({ apartment }) {
  return (
    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 text-center">
      <div className="space-y-1">
        <Calendar className="h-5 w-5 mx-auto text-primary" aria-hidden="true" />
        <div className="text-xs sm:text-body2 text-muted-foreground">
          <GlossaryTooltip term="건축년도">건축년도</GlossaryTooltip>
        </div>
        <div className="font-semibold text-sm sm:text-base">{apartment.buildYear}년</div>
      </div>

      <div className="space-y-1">
        <Users className="h-5 w-5 mx-auto text-primary" />
        <div className="text-body2 text-muted-foreground">
          <GlossaryTooltip term="세대수">세대수</GlossaryTooltip>
        </div>
        <div className="font-semibold">{formatNumber(apartment.units)}세대</div>
      </div>

      {/* 추가 정보 항목들... */}
    </div>
  );
}
```

#### 북마크 및 공유 버튼 패턴

```tsx
// 북마크와 공유 기능이 있는 헤더
function ActionHeader({ title, isBookmarked, onBookmark, onShare }) {
  return (
    <CardTitle className="flex items-center justify-between">
      <span>{title}</span>
      <div className="flex gap-2">
        <Button
          variant={isBookmarked ? "bookmarked" : "bookmark"}
          size="icon"
          onClick={onBookmark}
          aria-label={isBookmarked ? "북마크 제거" : "북마크 추가"}
        >
          <Heart className="h-4 w-4" />
        </Button>

        <Button
          variant="outline"
          size="icon"
          onClick={onShare}
          aria-label="공유하기"
        >
          <Share className="h-4 w-4" />
        </Button>
      </div>
    </CardTitle>
  );
}
```

### 검색 페이지 패턴

검색 페이지(`src/app/search/page.tsx`)에서 사용된 패턴들입니다.

#### 필터 패널 패턴

```tsx
// 가격 범위 슬라이더
function PriceRangeFilter({ value, onChange }) {
  return (
    <div className="space-y-3">
      <h3 className="font-semibold text-body1">매매가격 (억원)</h3>
      <Slider
        value={[value[0] / 100000000, value[1] / 100000000]}
        onValueChange={([min, max]) =>
          onChange([min * 100000000, max * 100000000])
        }
        max={30}
        min={0.5}
        step={0.5}
        className="w-full"
      />
      <div className="flex justify-between text-body2 text-muted-foreground">
        <span>{(value[0] / 100000000).toFixed(1)}억</span>
        <span>{(value[1] / 100000000).toFixed(1)}억</span>
      </div>
    </div>
  );
}

// 편의시설 체크박스 그룹
function FacilitiesFilter({ selected, onChange }) {
  return (
    <div className="space-y-3">
      <h3 className="font-semibold text-body1">편의시설</h3>
      <div className="grid grid-cols-1 gap-2">
        {facilities.slice(0, 8).map((facility) => (
          <div key={facility.id} className="flex items-center space-x-2">
            <Checkbox
              id={facility.id}
              checked={selected.includes(facility.name)}
              onCheckedChange={(checked) => {
                if (checked) {
                  onChange([...selected, facility.name]);
                } else {
                  onChange(selected.filter(f => f !== facility.name));
                }
              }}
            />
            <label htmlFor={facility.id} className="text-body2 text-foreground cursor-pointer">
              {facility.name}
            </label>
          </div>
        ))}
      </div>
    </div>
  );
}
```

#### 뷰 모드 토글 패턴

```tsx
// 그리드/리스트 뷰 토글
function ViewModeToggle({ mode, onChange }) {
  return (
    <div className="flex border rounded-md" role="group" aria-label="보기 방식 선택">
      <Button
        variant={mode === 'grid' ? 'default' : 'ghost'}
        size="icon-sm"
        onClick={() => onChange('grid')}
        className="rounded-r-none focus-outline"
        aria-label="격자 보기"
        aria-pressed={mode === 'grid'}
      >
        <Grid className="h-4 w-4" aria-hidden="true" />
      </Button>

      <Button
        variant={mode === 'list' ? 'default' : 'ghost'}
        size="icon-sm"
        onClick={() => onChange('list')}
        className="rounded-l-none focus-outline"
        aria-label="목록 보기"
        aria-pressed={mode === 'list'}
      >
        <List className="h-4 w-4" aria-hidden="true" />
      </Button>
    </div>
  );
}
```

#### 정렬 선택 패턴

```tsx
// 정렬 옵션 선택
function SortSelect({ value, onChange }) {
  return (
    <Select value={value} onValueChange={onChange}>
      <SelectTrigger className="w-28 sm:w-32" aria-label="정렬 방식 선택">
        <SelectValue />
      </SelectTrigger>
      <SelectContent>
        <SelectItem value="newest">최신순</SelectItem>
        <SelectItem value="price-low">가격 낮은순</SelectItem>
        <SelectItem value="price-high">가격 높은순</SelectItem>
        <SelectItem value="area">면적순</SelectItem>
      </SelectContent>
    </Select>
  );
}
```

### 레이아웃 패턴

#### 메인 레이아웃 패턴

```tsx
// 스킵 링크가 포함된 메인 레이아웃
function RootLayout({ children }) {
  return (
    <html lang="ko" suppressHydrationWarning>
      <body className="font-sans antialiased">
        <Providers>
          {/* Skip to main content link for keyboard users */}
          <a
            href="#main-content"
            className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-primary-foreground px-4 py-2 rounded-md z-50 focus-outline"
          >
            메인 콘텐츠로 건너뛰기
          </a>

          <div className="min-h-screen flex flex-col">
            <Header />
            <main id="main-content" className="flex-1" tabIndex={-1}>
              {children}
            </main>
            <Footer />
          </div>
        </Providers>
      </body>
    </html>
  );
}
```

#### 브레드크럼 패턴

```tsx
// 접근성이 고려된 브레드크럼
function Breadcrumb({ items }) {
  return (
    <nav aria-label="브레드크럼" className="mb-6">
      <ol className="flex items-center gap-2 text-sm sm:text-body2 text-muted-foreground">
        {items.map((item, index) => (
          <li key={index} className="flex items-center gap-2">
            {index > 0 && <span aria-hidden="true">/</span>}
            {item.href ? (
              <Link href={item.href} className="hover:text-foreground focus-outline">
                {item.label}
              </Link>
            ) : (
              <span className="text-foreground" aria-current="page">
                {item.label}
              </span>
            )}
          </li>
        ))}
      </ol>
    </nav>
  );
}

// 사용 예제
<Breadcrumb
  items={[
    { label: '홈', href: '/' },
    { label: '검색', href: '/search' },
    { label: apartment.name }
  ]}
/>
```

## 공통 UI 패턴

### 로딩 상태 패턴

```tsx
// 스켈레톤 로딩
function SkeletonCard() {
  return (
    <Card>
      <CardContent className="p-4">
        <div className="animate-pulse">
          <div className="h-40 bg-muted rounded mb-4"></div>
          <div className="h-4 bg-muted rounded w-3/4 mb-2"></div>
          <div className="h-4 bg-muted rounded w-1/2 mb-4"></div>
          <div className="flex justify-between">
            <div className="h-4 bg-muted rounded w-1/4"></div>
            <div className="h-4 bg-muted rounded w-1/3"></div>
          </div>
        </div>
      </CardContent>
    </Card>
  );
}

// 버튼 로딩
function LoadingButton({ isLoading, children, ...props }) {
  return (
    <Button disabled={isLoading} {...props}>
      {isLoading ? (
        <div className="flex items-center gap-2">
          <div className="animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full" />
          로딩 중...
        </div>
      ) : (
        children
      )}
    </Button>
  );
}
```

### 에러 상태 패턴

```tsx
// 에러 경계 컴포넌트
function ErrorFallback({ error, resetErrorBoundary }) {
  return (
    <div className="text-center py-12">
      <AlertTriangle className="h-12 w-12 mx-auto text-destructive mb-4" />
      <h2 className="text-lg font-semibold mb-2">문제가 발생했습니다</h2>
      <p className="text-muted-foreground mb-4">
        {error.message || '예상치 못한 오류가 발생했습니다.'}
      </p>
      <Button onClick={resetErrorBoundary} variant="outline">
        다시 시도
      </Button>
    </div>
  );
}

// 인라인 에러 표시
function ErrorMessage({ message, retry }) {
  return (
    <div className="p-4 border border-destructive text-destructive rounded-lg bg-destructive/5">
      <div className="flex items-center gap-2 mb-2">
        <AlertCircle className="h-4 w-4" />
        <span className="font-medium">오류 발생</span>
      </div>
      <p className="text-sm mb-3">{message}</p>
      {retry && (
        <Button variant="outline" size="sm" onClick={retry}>
          다시 시도
        </Button>
      )}
    </div>
  );
}
```

### 빈 상태 패턴

```tsx
// 검색 결과 없음
function EmptySearchResults({ query, onReset }) {
  return (
    <div className="text-center py-12">
      <Search className="h-12 w-12 mx-auto text-muted-foreground mb-4" />
      <h3 className="text-lg font-semibold mb-2">
        &ldquo;{query}&rdquo; 검색 결과가 없습니다
      </h3>
      <p className="text-muted-foreground mb-4">
        다른 검색어로 시도해보거나 필터를 조정해보세요.
      </p>
      <div className="flex gap-2 justify-center">
        <Button variant="outline" onClick={onReset}>
          필터 초기화
        </Button>
        <Button>전체 목록 보기</Button>
      </div>
    </div>
  );
}

// 일반적인 빈 상태
function EmptyState({ icon: Icon, title, description, action }) {
  return (
    <div className="text-center py-12">
      {Icon && <Icon className="h-12 w-12 mx-auto text-muted-foreground mb-4" />}
      <h3 className="text-lg font-semibold mb-2">{title}</h3>
      <p className="text-muted-foreground mb-4">{description}</p>
      {action}
    </div>
  );
}
```

### 모달 패턴

```tsx
// 확인 다이얼로그
function ConfirmDialog({ isOpen, onClose, onConfirm, title, description }) {
  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>{title}</DialogTitle>
          <DialogDescription>{description}</DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button variant="outline" onClick={onClose}>
            취소
          </Button>
          <Button variant="destructive" onClick={onConfirm}>
            확인
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}

// 폼 모달
function FormModal({ isOpen, onClose, onSubmit, title, children }) {
  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>{title}</DialogTitle>
        </DialogHeader>
        <form onSubmit={onSubmit}>
          <div className="space-y-4 py-4">
            {children}
          </div>
          <DialogFooter>
            <Button type="button" variant="outline" onClick={onClose}>
              취소
            </Button>
            <Button type="submit">확인</Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
}
```

### 데이터 테이블 패턴

```tsx
// 정렬 가능한 테이블 헤더
function SortableHeader({ children, sortKey, currentSort, onSort }) {
  const isActive = currentSort?.key === sortKey;
  const direction = isActive ? currentSort.direction : 'asc';

  return (
    <button
      className="flex items-center gap-1 hover:text-foreground focus-outline"
      onClick={() => onSort(sortKey, direction === 'asc' ? 'desc' : 'asc')}
    >
      {children}
      {isActive ? (
        direction === 'asc' ? (
          <ChevronUp className="h-4 w-4" />
        ) : (
          <ChevronDown className="h-4 w-4" />
        )
      ) : (
        <ChevronsUpDown className="h-4 w-4 opacity-50" />
      )}
    </button>
  );
}

// 페이지네이션
function Pagination({ currentPage, totalPages, onPageChange }) {
  return (
    <div className="flex items-center justify-between">
      <p className="text-sm text-muted-foreground">
        총 {totalPages}페이지 중 {currentPage}페이지
      </p>
      <div className="flex gap-2">
        <Button
          variant="outline"
          size="sm"
          disabled={currentPage === 1}
          onClick={() => onPageChange(currentPage - 1)}
        >
          이전
        </Button>
        <Button
          variant="outline"
          size="sm"
          disabled={currentPage === totalPages}
          onClick={() => onPageChange(currentPage + 1)}
        >
          다음
        </Button>
      </div>
    </div>
  );
}
```

### 툴팁 패턴

```tsx
// 용어 설명 툴팁 (실제 코드에서 사용됨)
function GlossaryTooltip({ term, children }) {
  return (
    <Tooltip>
      <TooltipTrigger asChild>
        <button className="underline decoration-dotted hover:text-primary focus-outline">
          {children || term}
        </button>
      </TooltipTrigger>
      <TooltipContent>
        <p>{getGlossaryDefinition(term)}</p>
      </TooltipContent>
    </Tooltip>
  );
}
```

이러한 패턴들은 아파트인포 프로젝트의 실제 코드에서 추출한 것으로, 일관된 사용자 경험과 접근성을 보장합니다.